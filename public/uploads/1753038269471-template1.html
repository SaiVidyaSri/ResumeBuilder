<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{#if personalInfo.firstName}}{{personalInfo.firstName}} {{personalInfo.lastName}}{{else}}Professional Resume{{/if}} - Resume</title>
    <style>
        /* 
         * Base styles for the resume template. 
         * These styles will be overridden or extended by customizations.
         * DO NOT remove the CSS variables (--primary-color, etc.) as they are used for dynamic theming.
         */
        :root {
            --primary-color: #2c3e50; /* Dark blue/grey for main headings */
            --secondary-color: #3498db; /* Bright blue for accents/borders */
            --accent-color: #e74c3c; /* Red for specific highlights if needed */
            --text-color: #333; /* General text color */
            --background-color: #f8f9fa; /* Light background for main content */
            --sidebar-bg: #2c3e50; /* Background for sidebar */
            --font-family: 'Arial', sans-serif; /* Default font, overridden by customization */
        }
        
        /* Color scheme variations (added via .color-scheme-X class on <body>) */
        .color-scheme-blue {
            --primary-color: #1e3a8a;
            --secondary-color: #3b82f6;
            --sidebar-bg: #1e3a8a;
        }
        
        .color-scheme-green {
            --primary-color: #166534;
            --secondary-color: #22c55e;
            --sidebar-bg: #166534;
        }
        
        .color-scheme-purple {
            --primary-color: #7c3aed;
            --secondary-color: #a855f7;
            --sidebar-bg: #7c3aed;
        }
        
        .color-scheme-red {
            --primary-color: #dc2626;
            --secondary-color: #ef4444;
            --sidebar-bg: #dc2626;
        }
        
        /* Layout variations (added via .layout-X class on <body>) */
        .layout-compact { line-height: 1.2; font-size: 9pt; }
        .layout-expanded { line-height: 1.8; font-size: 11pt; }
        .layout-modern { 
            font-weight: 300;
            letter-spacing: 0.5px;
        }
        
        /* Base styles using CSS variables */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: var(--font-family); /* Uses CSS variable for dynamic font */
            font-size: 10pt; 
            line-height: 1.4; 
            color: var(--text-color); 
            background: white; 
            max-width: 8.5in; /* Standard letter size width */
            margin: 0 auto; 
        }
        
        .resume-container { 
            display: grid; 
            grid-template-columns: 220pt 1fr; /* Sidebar width and main content */
            min-height: 11in; /* Standard letter size height */
            box-shadow: 0 0 10px rgba(0,0,0,0.1); /* Subtle shadow for visual separation */
        }
        
        .sidebar { 
            background: var(--sidebar-bg); 
            color: white; 
            padding: 20pt; 
        }
        
        .main-content { 
            padding: 20pt; 
            background: var(--background-color); 
        }
        
        /* Enhanced photo handling */
        .photo-container { text-align: center; margin-bottom: 20pt; }
        .photo-placeholder { 
            width: 120pt; 
            height: 120pt; 
            border-radius: 50%; 
            border: 4pt solid white; 
            margin: 0 auto; 
            background: #34495e; /* Placeholder background */
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 8pt; 
            text-align: center; 
            overflow: hidden;
        }
        
        .photo-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* Enhanced typography */
        .name { 
            font-size: 18pt; 
            font-weight: bold; 
            margin-bottom: 5pt; 
            text-align: center; 
            text-transform: uppercase; 
            letter-spacing: 1pt; 
        }
        
        .title { 
            font-size: 12pt; 
            margin-bottom: 20pt; 
            text-align: center; 
            color: #bdc3c7; /* Lighter grey for title */
        }
        
        /* Sidebar sections */
        .sidebar-section { margin-bottom: 20pt; }
        .sidebar-title { 
            font-size: 12pt; 
            font-weight: bold; 
            margin-bottom: 10pt; 
            text-transform: uppercase; 
            border-bottom: 2pt solid var(--secondary-color); /* Accent color border */
            padding-bottom: 3pt; 
        }
        
        .contact-item { 
            margin-bottom: 8pt; 
            font-size: 9pt; 
            word-break: break-word; /* Prevents long emails/URLs from breaking layout */
        }
        
        .contact-item strong { color: var(--secondary-color); }
        
        /* Skills styling */
        .skill-item { margin-bottom: 8pt; }
        .skill-name { font-weight: bold; margin-bottom: 2pt; }
        .skill-level { font-size: 8pt; color: #bdc3c7; }
        .skill-list { font-size: 8pt; color: #bdc3c7; line-height: 1.3; }
        
        /* Main content sections */
        .main-section { margin-bottom: 20pt; }
        .main-title { 
            font-size: 14pt; 
            font-weight: bold; 
            margin-bottom: 10pt; 
            text-transform: uppercase; 
            color: var(--primary-color); 
            border-bottom: 2pt solid var(--secondary-color); 
            padding-bottom: 3pt; 
        }
        
        /* Summary section */
        .summary { 
            background: white; 
            padding: 15pt; 
            border-left: 4pt solid var(--secondary-color); 
            margin-bottom: 15pt; 
            text-align: justify; 
            line-height: 1.5;
        }
        
        /* Experience items */
        .experience-item { 
            background: white; 
            padding: 12pt; 
            margin-bottom: 12pt; 
            border-left: 4pt solid var(--secondary-color); 
        }
        
        .job-title { 
            font-weight: bold; 
            font-size: 11pt; 
            color: var(--primary-color); 
        }
        
        .company { 
            font-style: italic; 
            margin-top: 2pt; 
            color: #7f8c8d; 
        }
        
        .date { 
            font-size: 9pt; 
            color: #95a5a6; 
            margin-top: 2pt; 
        }
        
        .job-description ul { 
            margin-left: 15pt; 
            margin-top: 5pt; 
        }
        
        .job-description li { 
            margin-bottom: 3pt; 
            font-size: 9pt; 
            line-height: 1.4;
        }
        
        /* Education items */
        .education-item { 
            background: white; 
            padding: 12pt; 
            border-left: 4pt solid var(--secondary-color); 
            margin-bottom: 8pt;
        }
        
        .degree { 
            font-weight: bold; 
            color: var(--primary-color); 
        }
        
        .school { 
            font-style: italic; 
            margin-top: 2pt; 
            color: #7f8c8d; 
        }
        
        .education-details { 
            font-size: 9pt; 
            color: #95a5a6; 
            margin-top: 2pt; 
        }
        
        /* Project items */
        .project-item { 
            background: white; 
            padding: 10pt; 
            margin-bottom: 8pt; 
            border-left: 4pt solid var(--secondary-color); 
        }
        
        .project-title { 
            font-weight: bold; 
            color: var(--primary-color); 
            margin-bottom: 3pt; 
        }
        
        .project-description { 
            font-size: 9pt; 
            margin-bottom: 3pt; 
            text-align: justify; 
            line-height: 1.4;
        }
        
        .tech-stack { 
            font-size: 8pt; 
            color: #7f8c8d; 
            font-style: italic; 
        }
        
        /* Certification items */
        .cert-item { 
            margin-bottom: 5pt; 
            font-size: 9pt; 
        }
        
        /* Language items */
        .language-item {
            margin-bottom: 5pt;
        }
        
        .language-name {
            font-weight: bold;
            font-size: 9pt;
        }
        
        .language-proficiency {
            font-size: 8pt;
            color: #bdc3c7;
        }
        
        /* Empty state styling for sections with no data */
        .empty-section {
            font-style: italic;
            color: #95a5a6;
            font-size: 9pt;
            text-align: center;
            padding: 10pt;
            border: 1px dashed #ccc;
            margin: 10pt 0;
        }
        
        /* Print optimization */
        @media print {
            .sidebar { 
                background: var(--sidebar-bg) !important; 
                -webkit-print-color-adjust: exact; /* For Webkit browsers */
                print-color-adjust: exact; /* Standard property */
            }
            .main-content { 
                background: var(--background-color) !important; 
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact; 
            }
            .resume-container {
                min-height: auto; /* Allow content to flow across pages */
                box-shadow: none; /* Remove shadow in print */
            }
            body { 
                margin: 0; 
                padding: 0; 
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact; 
            }
        }
    </style>
</head>
<body>
    <div class="resume-container">
        <div class="sidebar">
            <!-- Photo Section -->
            <div class="photo-container">
                <div class="photo-placeholder">
                    {{#if personalInfo.photo}}
                        <img src="{{personalInfo.photo}}" alt="{{personalInfo.firstName}} {{personalInfo.lastName}} Profile Photo">
                    {{else}}
                        PROFESSIONAL<br>PHOTO<br>PLACEHOLDER
                    {{/if}}
                </div>
            </div>
            
            <!-- Name and Title -->
            <div class="name">
                {{#if personalInfo.firstName}}
                    {{personalInfo.firstName}}
                    {{#if personalInfo.middleName}} {{personalInfo.middleName}}{{/if}}
                    {{personalInfo.lastName}}
                {{else}}
                    YOUR NAME HERE
                {{/if}}
            </div>
            <div class="title">
                {{#if professionalInfo.title}}
                    {{professionalInfo.title}}
                {{else}}
                    Professional Title
                {{/if}}
            </div>
            
            <!-- Contact Information -->
            <div class="sidebar-section">
                <div class="sidebar-title">Contact</div>
                
                {{#if contactInfo.email}}
                <div class="contact-item">
                    <strong>Email:</strong><br>{{contactInfo.email}}
                </div>
                {{/if}}
                
                {{#if contactInfo.phone}}
                <div class="contact-item">
                    <strong>Phone:</strong><br>{{contactInfo.phone}}
                </div>
                {{/if}
                
                {{#if contactInfo.address}}
                <div class="contact-item">
                    <strong>Address:</strong><br>
                    {{contactInfo.address}}
                    {{#if contactInfo.city}}<br>{{contactInfo.city}}{{/if}}{{#if contactInfo.state}}, {{contactInfo.state}}{{/if}}
                    {{#if contactInfo.zipCode}}<br>{{contactInfo.zipCode}}{{/if}}
                    {{#if contactInfo.country}}<br>{{contactInfo.country}}{{/if}}
                </div>
                {{else}}
                    {{#if contactInfo.city}}
                    <div class="contact-item">
                        <strong>Location:</strong><br>
                        {{contactInfo.city}}{{#if contactInfo.state}}, {{contactInfo.state}}{{/if}}
                        {{#if contactInfo.country}}<br>{{contactInfo.country}}{{/if}}
                    </div>
                    {{/if}}
                {{/if}}
                
                {{#if socialProfiles.linkedin}}
                <div class="contact-item">
                    <strong>LinkedIn:</strong><br><a href="{{socialProfiles.linkedin}}" target="_blank">{{socialProfiles.linkedin}}</a>
                </div>
                {{/if}}
                
                {{#if socialProfiles.website}}
                <div class="contact-item">
                    <strong>Website:</strong><br><a href="{{socialProfiles.website}}" target="_blank">{{socialProfiles.website}}</a>
                </div>
                {{/if}}
                
                {{#if socialProfiles.github}}
                <div class="contact-item">
                    <strong>GitHub:</strong><br><a href="{{socialProfiles.github}}" target="_blank">{{socialProfiles.github}}</a>
                </div>
                {{/if}}
            </div>

            <!-- Education Section -->
            {{#ifExists education}}
            <div class="sidebar-section">
                <div class="sidebar-title">Education</div>
                {{#each education}}
                <div class="education-item">
                    <div class="degree">{{degree}}</div>
                    {{#if fieldOfStudy}}<div class="skill-level">{{fieldOfStudy}}</div>{{/if}}
                    <div class="school">{{institution}}</div>
                    <div class="education-details">
                        {{#if startYear}}{{startYear}}{{/if}}{{#if endYear}} - {{endYear}}{{/if}}
                        {{#if gpa}}<br>GPA: {{gpa}}{{/if}}
                        {{#if honors}}<br>{{honors}}{{/if}}
                    </div>
                </div>
                {{/each}}
            </div>
            {{else}}
            <div class="sidebar-section">
                <div class="sidebar-title">Education</div>
                <div class="empty-section">Education details will appear here</div>
            </div>
            {{/ifExists}}

            <!-- Skills Section -->
            {{#ifExists skillsByCategory}}
            <div class="sidebar-section">
                <div class="sidebar-title">Skills</div>
                {{#each skillsByCategory}}
                <div class="skill-item">
                    <div class="skill-name">{{category}}</div>
                    <div class="skill-list">{{join skills ", "}}</div>
                </div>
                {{/each}}
            </div>
            {{else}}
            <div class="sidebar-section">
                <div class="sidebar-title">Skills</div>
                <div class="empty-section">Skills will appear here</div>
            </div>
            {{/ifExists}}

            <!-- Languages Section -->
            {{#ifExists languages}}
            <div class="sidebar-section">
                <div class="sidebar-title">Languages</div>
                {{#each languages}}
                <div class="language-item">
                    <div class="language-name">{{language}}</div>
                    <div class="language-proficiency">{{proficiency}}</div>
                </div>
                {{/each}}
            </div>
            {{/ifExists}}

            <!-- Certifications Section -->
            {{#ifExists certifications}}
            <div class="sidebar-section">
                <div class="sidebar-title">Certifications</div>
                {{#each certifications}}
                <div class="cert-item">
                    {{name}}{{#if year}} ({{year}}){{/if}}
                    {{#if issuer}}<br><em>{{issuer}}</em>{{/if}}
                </div>
                {{/each}}
            </div>
            {{/ifExists}}
        </div>

        <div class="main-content">
            <!-- Professional Summary -->
            {{#if professionalInfo.summary}}
            <div class="main-section">
                <div class="main-title">Professional Summary</div>
                <div class="summary">{{professionalInfo.summary}}</div>
            </div>
            {{else}}
            <div class="main-section">
                <div class="main-title">Professional Summary</div>
                <div class="summary empty-section">Your professional summary will appear here. Go to the resume editor to add your summary.</div>
            </div>
            {{/if}}

            <!-- Work Experience -->
            {{#ifExists workExperience}}
            <div class="main-section">
                <div class="main-title">Work Experience</div>
                {{#each workExperience}}
                <div class="experience-item">
                    <div class="job-title">{{position}}</div>
                    <div class="company">{{company}}</div>
                    <div class="date">
                        {{formatDate startDate}} – {{#if endDate}}{{formatDate endDate}}{{else}}Present{{/if}}
                        {{#if location}} | {{location}}{{/if}}
                    </div>
                    {{#if description}}
                    <div class="job-description">
                        <p>{{description}}</p>
                    </div>
                    {{/if}}
                    {{#ifExists responsibilities}}
                    <div class="job-description">
                        <ul>
                            {{#each responsibilities}}
                            <li>{{this}}</li>
                            {{/each}}
                        </ul>
                    </div>
                    {{/ifExists}}
                    {{#ifExists achievements}}
                    <div class="job-description">
                        <strong>Key Achievements:</strong>
                        <ul>
                            {{#each achievements}}
                            <li>{{this}}</li>
                            {{/each}}
                        </ul>
                    </div>
                    {{/ifExists}}
                </div>
                {{/each}}
            </div>
            {{else}}
            <div class="main-section">
                <div class="main-title">Work Experience</div>
                <div class="empty-section">Your work experience will appear here. Go to the resume editor to add your experience.</div>
            </div>
            {{/ifExists}}

            <!-- Projects Section -->
            {{#ifExists projects}}
            <div class="main-section">
                <div class="main-title">Key Projects</div>
                {{#each projects}}
                <div class="project-item">
                    <div class="project-title">{{title}}</div>
                    {{#if description}}
                    <div class="project-description">{{description}}</div>
                    {{/if}}
                    {{#ifExists technologies}}
                    <div class="tech-stack">Technologies: {{join technologies ", "}}</div>
                    {{/ifExists}}
                    {{#if url}}
                    <div class="tech-stack">Project URL: <a href="{{url}}" target="_blank">{{url}}</a></div>
                    {{/if}}
                </div>
                {{/each}}
            </div>
            {{/ifExists}}
        </div>
    </div>
</body>
</html>