<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextHire - Template Preview</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/dashboard-styles.css">
    <link rel="stylesheet" href="../styles/templates-styles.css">
    <link rel="stylesheet" href="../styles/navigation-styles.css">
    <link rel="stylesheet" href="../styles/template-preview-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/jpg" href="../images/logo.jpg">
</head>
<body class="dashboard-body">
    <!-- Navigation -->
    <nav class="navbar dashboard-nav">
        <div class="container">
            <div class="logo">
                <div class="logo-placeholder">
                    <img src="../images/logo.jpg" alt="logo" class="logo-img">
                </div>
                <span>NEXTHIRE</span>
            </div>
            <div class="nav-links">
                <a href="dashboard.html">My resumes</a>
                <a href="favorites.html">Favourites</a>
                <a href="templates.html" class="active">Templates</a>
                <div class="user-profile-nav">
                    <div class="profile-icon" id="profileIcon">
                        <img src="../images/profile.jpeg" alt="Profile">
                    </div>
                    <div class="profile-dropdown" id="profileDropdown">
                        <a href="profile.html" class="dropdown-item">
                            <!-- <i class="fas fa-user"></i> -->
                             My profile 
                        </a>
                        <a href="favorites.html" class="dropdown-item">Saved Templates
                            <!-- <i class="fas fa-heart"></i>  -->
                        </a>
                        <a href="profile.html" class="dropdown-item">Privacy and Security
                            <!-- <i class="fas fa-cog"></i>  -->
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="logout.html" class="dropdown-item logout-link">Logout
                            <!-- <i class="fas fa-sign-out-alt"></i>  -->
                        </a>
                    </div>
                </div>
            </div>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="template-preview-main">
        <div class="container">
            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <!-- Will be populated by JavaScript -->
            </div>

            <div class="template-preview-container">
            <div class="template-preview-header">
                <h1 id="template-name">Template Preview</h1>
                <div class="template-actions">
                    <!-- Add Download and Save buttons before existing buttons -->
                    <div class="action-buttons-group">
                        <button id="favorite-btn" class="secondary-btn">
                            <i class="far fa-heart"></i> Add to Favorites
                        </button>
                        <!-- <button id="use-template-btn" class="primary-btn">
                            <i class="fas fa-edit"></i> Use This Template
                        </button> -->
                    </div>
                    <div class="action-buttons-group">
                        <button id="download-btn" class="action-btn download-btn">
                            <i class="fas fa-download"></i> Download
                        </button>
                        <button id="save-btn" class="action-btn save-btn">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>
            </div>

            <div id="template-loading" class="loading-container" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Loading template...</p>
            </div>

            <div id="template-error" class="error-container" style="display: none;">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Error Loading Template</h3>
                <p id="error-message">Unable to load template. Please try again.</p>
                <button id="retry-btn" class="primary-btn">Retry</button>
            </div>

                <div class="template-preview-content">
                    <div class="template-preview-sidebar">
                       <div class="template-info-card">
                            <h3>Template Information</h3>
                            <div class="template-info-item">
                                <span class="info-label">Name:</span>
                                <span id="info-name" class="info-value">Loading...</span>
                            </div>
                            <div class="template-info-item">
                                <span class="info-label">Category:</span>
                                <span id="info-category" class="info-value">Loading...</span>
                            </div>
                            <div class="template-info-item">
                                <span class="info-label">Industry:</span>
                                <span id="info-industry" class="info-value">Loading...</span>
                            </div>
                            <div class="template-info-item">
                                <span class="info-label">Rating:</span>
                                <span id="info-rating" class="info-value">
                                    <div class="rating-stars" id="rating-stars">
                                        <!-- Stars will be populated dynamically -->
                                    </div>
                                    <span id="rating-value">(0.0)</span>
                                </span>
                            </div>
                            <div class="template-info-item">
                                <span class="info-label">Downloads:</span>
                                <span id="info-downloads" class="info-value">0</span>
                            </div>
                        </div>

                        <div class="template-features-card">
                            <h3>Features</h3>
                            <ul class="feature-list" id="feature-list">
                                <!-- Features will be populated dynamically -->
                                <li class="feature-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Loading features...
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="template-preview-frame">
                        <div class="preview-controls">
                            <div class="page-controls">
                                <button id="prev-page" class="page-btn" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <span id="page-indicator">Page 1 of 2</span>
                                <button id="next-page" class="page-btn">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            <div class="zoom-controls">
                                <button id="zoom-out" class="zoom-btn">
                                    <i class="fas fa-search-minus"></i>
                                </button>
                                <span id="zoom-level">100%</span>
                                <button id="zoom-in" class="zoom-btn">
                                    <i class="fas fa-search-plus"></i>
                                </button>
                            </div>
                        </div>
                        <div class="preview-frame-container">
                            <iframe id="templatePreviewIframe"></iframe>
                        </div>
                    </div>
                </div>
            </div>

            <div class="template-preview-footer">
                <button id="back-to-templates" class="secondary">
                    <i class="fas fa-arrow-left"></i> Back to Templates
                </button>
                <!-- <button id="use-template-btn-bottom" class="primary-btn">
                    <i class="fas fa-edit"></i> Use This Template
                </button> -->
            </div>
        </div>
    </main>

    <!-- Save Template Modal -->
<div id="saveTemplateModal" class="modal-overlay" style="display: none;">
    <div class="modal-container save-modal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-save"></i>
                <h3>Save Template</h3>
            </div>
            <button class="modal-close" id="closeSaveModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <p>Save this template to your collection for easy access later.</p>
            
            <div class="form-group">
                <label for="templateName">
                    <i class="fas fa-tag"></i>
                    Template Name
                </label>
                <input 
                    type="text" 
                    id="templateName" 
                    class="form-input" 
                    placeholder="Enter a name for your template"
                    maxlength="100"
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="templateDescription">
                    <i class="fas fa-align-left"></i>
                    Description (Optional)
                </label>
                <textarea 
                    id="templateDescription" 
                    class="form-textarea" 
                    placeholder="Add a brief description to help you remember this template"
                    maxlength="200"
                    rows="3"
                ></textarea>
                <div class="character-count">
                    <span id="charCount">0</span>/200
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button id="cancelSave" class="btn btn-cancel">
                Cancel
            </button>
            <button id="confirmSave" class="btn btn-save">
                Save
            </button>
        </div>
    </div>
</div>

<!-- Place these within your <body> tag, ideally as direct children or within a main container -->

<!-- Loading State Overlay -->
<div id="loadingIndicator" class="loading-overlay" style="display: none;">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <p id="loadingMessage">Loading your personalized resume preview...</p>
    </div>
</div>

<!-- Error State Container -->
<div id="errorContainer" class="error-container" style="display: none;">
    <div class="error-content">
        <i class="fas fa-exclamation-triangle"></i> <!-- Font Awesome warning icon -->
        <h3>Error Loading Preview</h3>
        <p id="errorMessage">An error occurred while loading your resume preview. Please try again.</p>
        <button onclick="location.reload()" class="btn btn-primary">Try Again</button>
    </div>
</div>

<!-- Download Format Selection Modal -->
<div id="downloadFormatModal" class="modal-overlay">
    <div class="modal-container download-modal">
        <div class="modal-header">
            <h3><i class="fas fa-download"></i> Download Template</h3>
            <button class="close-modal" id="closeDownloadModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="download-options">
                <p class="download-description">
                    Enter a name for your PDF file:
                </p>
                
                <div class="filename-input-section">
                    <label for="downloadFileName">File Name:</label>
                    <input type="text" id="downloadFileName" class="filename-input" placeholder="Enter file name (without extension)" />
                    <small class="filename-note">The file will be saved as [name].pdf</small>
                </div>
                
                <div class="format-options">
                    <div class="format-option selected" data-format="pdf">
                        <div class="format-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="format-details">
                            <h4>PDF Format</h4>
                            <p>Perfect for printing and professional presentation. Maintains exact formatting and layout.</p>
                            <div class="format-benefits">
                                <span class="benefit-tag">Print-ready</span>
                                <span class="benefit-tag">Universal compatibility</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" id="cancelDownload">
                <i class="fas fa-times"></i>
                Cancel
            </button>
            <button class="btn btn-primary" id="confirmDownload">
                <i class="fas fa-download"></i>
                <span class="btn-text">Download PDF</span>
            </button>
        </div>
    </div>
</div>
    <!-- Footer -->
    <footer class="simple-footer">
        <div class="container">
            <p>&copy; 2025 NEXTHIRE Pvt. Ltd.</p>
        </div>
    </footer>

    <!-- Logout Modal -->
    <div class="logout-modal" id="logoutModal">
        <div class="logout-modal-content">
            <h3>Logout Confirmation</h3>
            <p>Are you sure you want to logout from your account?</p>
            <div class="logout-modal-actions">
                <button class="cancel-btn">Cancel</button>
                <button class="logout-btn">Logout</button>
            </div>
        </div>
    </div>

    <script src="../scripts/template-preview-script.js"></script>
</body>
</html>
